# Product Goal

## サービス概要

Zipファイルで圧縮された漫画画像を一括で読み込み、OCRを実行してテキストデータを出力するPython CLIツール。

### ターゲットユーザー
- 漫画のテキストデータを抽出したい個人ユーザー
- 漫画の内容をテキスト検索可能にしたいユーザー
- ローカル環境で高速にOCR処理を行いたいユーザー（特にApple Silicon搭載Macユーザー）

### 解決する課題
- 手動でのテキスト抽出の手間を削減
- 複数ページの漫画を一括処理する効率化
- ローカル環境での高速処理（クラウドサービス不要）
- Apple SiliconのGPU（MPS）を活用した高速推論

## MVP要件（必須機能）

### 1. 入力処理
- Zipファイルを引数として受け取る
- 画像ファイル（`.jpg`, `.jpeg`, `.png`, `.webp`）を抽出
- ファイル名で自然順ソート（`1.jpg`, `2.jpg`, `10.jpg` の順）

### 2. 推論パイプライン
- **Text Detection**: `comic-text-detector`を使用してテキスト領域（吹き出し）を検出
- **Reading Order**: 検出領域を漫画の読み順（右上→左下、段組み考慮）でソート
- **Text Recognition**: `manga-ocr`を使用して各領域のテキストを認識

### 3. 出力生成
- JSON形式: `{zip_filename}_output.json`（構造化データ）
- テキスト形式: `{zip_filename}_output.txt`（人間が読みやすい形式）

### 4. 非機能要件
- Apple Silicon (M4) のMPSを優先的に使用
- 破損画像があっても処理を継続（エラーログ出力）
- 一時ファイルの自動クリーンアップ

## 技術的制約

- **ハードウェア**: Apple Silicon (M4) を想定（MPS必須）
- **言語**: Python 3.10+
- **処理方式**: ローカル推論（クラウド不要）
- **入力形式**: Zipアーカイブ
- **出力形式**: JSON + テキストファイル

